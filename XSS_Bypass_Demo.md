# 進階演示腳本：為什麼前端防禦是無效的？ (繞過測試)

## 1. 觀念解說：餐廳比喻 (1分鐘)

**[講者]**：
剛剛我們展示了「安全模式」，大家可能會問：「既然在網頁上寫一段程式碼就能擋住，為什麼資安掃描工具 (Checkmarx) 還是說我們不安全？」

這要講到一個最重要的資安觀念：**「永遠不要信任使用者的瀏覽器（前端）」**。

我們可以把「網頁前端」想像成餐廳門口的**告示牌**，上面寫著：「請勿攜帶外食」。
* **一般使用者**（乖寶寶）會遵守規定。
* **駭客**（奧客）根本不看告示牌，直接把外食藏在包包裡帶進去。

如果你的防禦只做在網頁上，就像只立了告示牌，卻沒有服務生（後端伺服器）在現場檢查，那駭客隨時可以繞過。

---

## 2. 現場破解演示 (Live Demo) (2分鐘)

**[講者]**：
口說無憑，我現在就現場示範一次，如何「破解」我們剛剛開啟的安全模式。

**[演示動作 1]**：確認網頁目前處於 **「綠色 安全模式」**。
**[講者]**：
現在網頁是安全的，我點擊攻擊按鈕，會發現程式碼被過濾了，不會彈出視窗（點擊 Payload 1 測試給同學看）。

**[演示動作 2]**：按下鍵盤 **F12** 開發者工具，切換到 **Console (主控台)**。
**[講者]**：
但是，因為網頁程式碼是跑在我的電腦上，我有絕對的控制權。身為一個駭客，我可以打開瀏覽器的控制台，直接修改這個網頁的邏輯。

**[演示動作 3]**：在 Console 輸入以下指令並按 Enter：
```javascript
// 駭客指令：將防禦函式覆寫成「什麼都不做」
escapeHtml = function(input) { return input; };
```

**[講者]**：
我在這裡輸入了一行指令，意思是：「把那個過濾危險代碼的函式，改成『什麼都不做』」。

**[演示動作 4]**：回到網頁（不重新整理），再次點擊 **Payload 1 (基礎彈窗)**。
*(此時 Alert 視窗應該會直接彈出來)*

**[講者]**：
大家看！明明畫面上還顯示著「安全模式」，但防護罩已經被我拆掉了，攻擊直接成功！

---

## 3. 結論：Checkmarx 到底在檢查什麼？ (30秒)

**[講者]**：
這個實驗告訴我們：
1.  **前端的防禦**（JavaScript）很容易被繞過，它主要是為了使用者體驗。
2.  **真正的防禦**一定要做在**後端伺服器**（Server-side）。

所以，當 Checkmarx 掃描我們的程式碼時，它檢查的不是我們網頁上有沒有寫過濾，而是檢查我們的 **後端程式 (.NET/Java)** 在收到資料要存進資料庫之前，有沒有做最後的檢查。這才是資安防護的重點。

[回到主頁](README.md)
